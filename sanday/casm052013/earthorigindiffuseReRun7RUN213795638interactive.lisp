
(load "nosettle")      ; don't allow networks to settle, ever, since subtle differences are amplified by communication
(load "start") ; popco
;(defun report-progress-to-console ()) ; make this into a no-op - for batch jobs

(setf *random-state* #S(RANDOM-STATE :STATE #.(MAKE-ARRAY 627 :ELEMENT-TYPE (QUOTE (UNSIGNED-BYTE 32)) :INITIAL-CONTENTS (QUOTE (0 2567483615 1 4256014637 1240730188 2425213635 1129710865 5111768 1130608414 3396773864 4089954600 3137674299 3595644966 486351619 998280001 4272619133 2964414823 193139583 2646962332 2266798089 834563560 249828686 638278483 3115711140 1804596990 3320431053 2709365417 2715845788 529592368 3355479431 1747099542 614840579 1917313021 2794427182 2384060394 1063185834 227210021 2252530307 1333730287 3215296599 4225173715 2469096689 146878555 3115943616 4066938314 944209153 1857085881 2109951549 604828079 736642253 275537132 2491581468 3957082231 3381832400 3820407309 683800291 3724347452 3600564478 1646843719 511270847 3606821135 1811373181 3822165899 2084743009 1765540303 2935141087 894691527 799098261 1688056460 4187024131 794429965 31414733 651843901 331807173 163469298 671603063 2052570545 1359862516 3428239854 444523708 1987886960 2946934582 220761843 453061649 3003547473 2232343519 1133602527 2108844976 4076283989 2707500816 1145776998 1180078766 4044565129 1833538822 2263680478 313160343 3420288616 466423827 1914832471 2473285211 459377987 1926179001 1591828569 3641514289 3607991308 4294474635 3935516055 4010989891 900480403 2848929793 3448733192 2681212227 1434674348 2756910026 1936624026 1041843841 2921447330 4208886081 427691255 3713933062 2257446410 3362888668 1466903028 522645923 2099403707 2905856889 1571007790 2758381290 2634198240 3259909212 670539608 1260169020 3209375419 2791029335 202096556 1830904575 3939800320 2375427589 1042901105 730744271 1145545486 3819943270 2085207658 1262769030 2843377787 1221088418 775887621 1808054801 2757577601 2516073111 2124128700 2364187083 4016182595 821711596 3846031765 431233830 293951765 3264254367 881134416 2060075644 2547926753 101014531 2896289908 2658767921 2631738655 2076522321 3585280388 1577206880 2789419135 2185654634 4215864595 377035076 3426194238 140062603 508935193 354196477 4232936490 3206215401 3272665648 635177309 405598539 456886312 3407755262 2629241202 3642235871 750349846 1631612485 1645256034 436527768 1511577857 4148889199 2334956512 1196182810 233688564 708538616 3781848428 1680536392 533666239 357833225 4086574949 4043743679 2578091785 2538735395 428347562 1687676045 2988122878 747646442 932533454 3005737856 3556710279 903914408 3021192578 3650018455 2788125814 2286691609 2165071071 1769429929 255545882 701608212 3650319015 2624927902 3228697086 1817365750 577337757 3913985647 1062486525 2475997747 2037951425 467538488 3202675589 3081997160 770496931 3094077563 1766519972 1928240329 1306279660 1562173335 1493956757 1970737994 2159452978 2731157806 1533057273 1649180444 1394235821 1223474195 1951887492 4157634762 988195297 4132133930 3303237878 2802878865 3098674672 2984786227 4029251783 599756461 1679974687 3439426042 3969324737 3704195092 1005899973 2755406904 1566733014 69712782 341300204 872631361 3856771381 1533031957 1720761435 129833584 1980107598 1226356129 2955941177 263610955 3442466664 2306486890 417755534 2859703222 4233451651 1246449583 821674552 726004500 389163380 1832179435 1575048848 2278537924 2228209223 1854325202 1485302411 1441812168 4279903099 2664063926 2550824875 166669977 1014470852 2485744636 523578191 2834980972 2851204691 874661682 3864065482 2243500099 110760051 522003690 1681987049 3787758553 754083322 2506953624 1465018788 4010638328 3128151552 3989999782 1462118924 2368716563 4021851250 1902503520 2025643753 3538913443 808843424 1254894140 934565851 4059442674 1818115927 28695038 2764172353 752434336 3882802286 3802913033 504482706 2417722605 4192398757 3507110648 1266831372 3616225753 3500421862 4065288011 88352730 1783493719 2185116312 3551907313 2704951527 2267218705 3431413055 1288734753 2208455417 3073998176 1259160752 400312905 2239484889 532063191 1591072982 3655100089 2175350998 3586561394 927173359 1417957007 67464411 1884445402 2287690467 1220988404 2268607854 1080824976 3243061644 691759552 3700631860 2486212911 1699758775 1219483436 2527265669 3188908396 2118566246 3944736271 2492419197 879173098 259376063 1452447247 3750884730 2704192890 3144360218 3629716119 808908287 1491749612 3063005580 2049622598 560165192 3791319095 533677511 3255294761 3852634702 1902087773 630011647 2957527184 3868749708 3852540595 329279404 4111015144 3545659770 4189043321 3526325177 461842270 338698252 4045973158 2518047054 175457687 3745147512 3145275459 497013439 3908554933 2209307556 1908534834 4015808370 3612689718 3391676648 3588690048 3852147670 4187162365 1136053824 62326717 444303876 1847403015 3882094885 3335427712 1620531905 3848021428 1281407531 3409531668 3930430691 145906930 4179856720 3663797948 2216543541 3936054880 2290582784 1192074944 332999781 1951381387 870065078 932858129 1329946781 206851747 129332977 1259266454 1698528138 2079142266 2226484926 408417507 1202350223 3599291877 2532905044 3708672852 2184362711 3520143140 3754982981 34352365 1310728986 2302439890 3630799515 3866028994 437414441 1890624356 369312792 1388746894 240679771 3219883019 1588019043 3649205744 4146590846 2092183852 3587454867 2091261737 3619225269 2255876100 255735031 3847157152 306556640 4213239316 1405726758 3058859164 2319402741 4270483104 1780216718 1409051761 3908129666 1624323754 1160712505 1998815353 2160502513 1249509851 1044608493 827175302 634337352 3313275396 3639108594 540223323 1211615050 3459628829 801855976 438055385 1597074560 3436663131 3558923830 466071812 3877339111 3819753365 2826313032 3257514236 3210656807 2293971458 4121372108 2390937834 3674133194 2434615914 203085675 1618676761 2437948141 1581913148 2831628429 2427689685 3871839898 1498122506 116986871 3180182152 1616239051 2508284110 3623634670 600513059 1269079979 2496194573 4183782756 1905871213 1268797504 3638976987 2892173629 3649900335 2029096437 3807023541 1005400085 4273531087 608383973 1482009399 696045672 2696709578 3271753808 41392452 2280775099 1531010123 2684915256 1525238190 2312031159 1335584495 2446574559 1568121234 1108620989 3877031974 2071100304 403628139 1732734660 3729763820 3501265615 3126474794 945080666 2107497924 90720850 1911998101 3359174024 1389139944 3707841235 1531706638 1740668028 140825039 1467758701 2032860512 4185916432 281707695 3209074184 3887742519 3060799054 2149735510 1887940579 1761273060 3059130314 993079632 3878063077 3575555190 1839239324 2705671852 737651924 3273786155 2177768591 3841456991 313534715 2212156288 1510975059 415702665 4157188398 1171587946 3105544708 3754182143 3501947087 2966699956 1852124635 1426809319 4239254229 3590411211 3273225692 1040514810 1122264120 744888245 1764598718 987131861 3118954193 1067626696 3154003379 3366532866 210711096 2166085501 737549636 3289198177 2569164925 545818181 100541100 2920324410 3755277083 2188570357 522423066 2666157054 894471517 4092477509)))))

(load "sanday/casm052013/parenting18analogsAsBiases2")     ; library
(load "sanday/casm052013/parenting18JuneJuly2012persons")  ; library

;(setf *data-dir* "data/huntingsoc")

(setf *do-report-to-netlogo* nil)
; don't move graph around in telguess:
(setf *guess-layout-commands* "")
(setf *extra-meta-commands* "")
(setf *do-converse* t)

(defun list-persons-earth-origin-propns ()
  (mapcar #'(lambda (pers) 
              (cons pers 
                    (remove-if-not 
                      #'(lambda (propn-str) 
                          (equal "OE-" (subseq propn-str 0 3))) 
                      (mapcar #'(lambda (propn) 
                                  (symbol-name (personal-to-generic-sym propn pers)))
                              (get pers 'all-propositions)))))
          (get 'folks 'members)))

(defun count-persons-earth-origin-propns ()
  (mapcar #'(lambda (lis)
              (cons (car lis) (length (cdr lis))))
          (list-persons-earth-origin-propns)))

; make population of 100 persons, 92 ignorant of earth origin, 8 with individual earth origin propns
(make-earthless-person 'template)
(n-persons-with-name 'template 'h 92)
(kill 'template)

(make-earthless-person 'e0 (elt earth-origin-propns 0))
(make-earthless-person 'e1 (elt earth-origin-propns 1))
(make-earthless-person 'e2 (elt earth-origin-propns 2))
(make-earthless-person 'e3 (elt earth-origin-propns 3))
(make-earthless-person 'e4 (elt earth-origin-propns 4))
(make-earthless-person 'e5 (elt earth-origin-propns 5))
(make-earthless-person 'e6 (elt earth-origin-propns 6))
(make-earthless-person 'e7 (elt earth-origin-propns 7))

(init-pop)
(print (get 'folks 'members))
(print (list-persons-earth-origin-propns))
(setf *max-pop-ticks* 10)
(popco)
(do ()
    ((>= *pop-tick* 1000) 't)
  (print (list-persons-earth-origin-propns))
  (popco-plus-t 10))

;(drop-salience) ; removes all salience links from all persons
;
;(mapc #'parentize-person (get *the-population* 'members))
;(mapc #'dehunterize-person (get *the-population* 'members))
;
;;(let ((to-flip (random-subset 75 (get *the-population* 'members))))
;;  (mapc #'parentize-person to-flip)
;;  (mapc #'dehunterize-person to-flip))
;
;(popco-plus-t 2000)
;
;(quit)
